spec:
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: |-
          VolumeSnapshot — это запрос пользователя на создание точечного снапшота постоянного тома
          или на привязку к существующему снапшоту.
        properties:
          apiVersion:
            description: |-
              Версия API представления объекта. Серверы преобразуют распознанные схемы
              в последнее внутреннее значение и могут отклонять нераспознанные значения.
              Подробнее: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
          kind:
            description: |-
              Тип REST-ресурса, который представляет объект. Серверы могут определять это значение
              из конечной точки, на которую клиент отправляет запросы. Нельзя обновить
              после создания. Значение должно быть в формате CamelCase.
              Подробнее: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
          spec:
            description: |-
              Свойства снапшота, запрошенного пользователем.
              Подробнее: https://kubernetes.io/docs/concepts/storage/volume-snapshots#volumesnapshots
            properties:
              source:
                description: |-
                  Указывает источник создания снапшота.
                  Неизменяемо после создания.
                properties:
                  persistentVolumeClaimName:
                    description: |-
                      Имя объекта PersistentVolumeClaim, представляющего том,
                      из которого должен быть создан снапшот.
                      PVC должен находиться в том же неймспейсе, что и объект VolumeSnapshot.
                      Указывается, если снапшот не существует и его необходимо создать.
                      Неизменяемо.
                  volumeSnapshotContentName:
                    description: |-
                      Имя существующего объекта VolumeSnapshotContent, представляющего существующий снапшот тома.
                      Указывается, если снапшот уже существует и требуется только
                      его представление в Kubernetes.
                      Неизменяемо.
              volumeSnapshotClassName:
                description: |-
                  Имя VolumeSnapshotClass, запрошенного VolumeSnapshot.
                  Может быть пустым для использования класса снапшотов по умолчанию.
                  В кластере может быть несколько классов снапшотов по умолчанию: один
                  для каждого CSI-драйвера. Если класс снапшотов не указан,
                  проверяется VolumeSnapshotSource для определения связанного CSI-драйвера,
                  и используется класс снапшотов по умолчанию для этого CSI-драйвера.
                  Если для одного CSI-драйвера существует несколько VolumeSnapshotClass,
                  помеченных как используемые по умолчанию, CreateSnapshot завершается ошибкой и создает событие.
                  Не допускается пустая строка.
          status:
            description: |-
              Текущая информация о снапшоте.
              Перед использованием необходимо проверить успешность привязки между объектами VolumeSnapshot и
              VolumeSnapshotContent, убедившись, что оба объекта указывают друг на друга.
            properties:
              boundVolumeSnapshotContentName:
                description: |-
                  Имя объекта VolumeSnapshotContent, к которому привязан этот объект VolumeSnapshot.
                  Если не указано, объект VolumeSnapshot еще не привязан к объекту VolumeSnapshotContent.
                  **Примечание:** для предотвращения проблем с безопасностью перед использованием необходимо проверить
                  успешность привязки между объектами VolumeSnapshot и VolumeSnapshotContent, убедившись,
                  что оба объекта указывают друг на друга.
              creationTime:
                description: |-
                  Временная метка создания точечного снапшота нижележащей системой хранения.
                  При динамическом создании снапшота заполняется контроллером снапшотов
                  значением `creation_time`, возвращаемым из вызова gRPC `CreateSnapshot` CSI.
                  Для существующего снапшота заполняется значением `creation_time`,
                  возвращаемым из вызова gRPC `ListSnapshots` CSI, если драйвер поддерживает это.
                  Если не указано, время создания снапшота неизвестно.
              error:
                description: |-
                  Последняя наблюдаемая ошибка при создании снапшота, если есть.
                  Полезно контроллерам верхнего уровня (например, контроллеру приложения)
                  для решения о продолжении ожидания создания снапшота по типу ошибки.
                  Контроллер снапшотов продолжает повторные попытки при возникновении ошибки во время
                  создания снапшота. После успешного создания поле очищается.
                properties:
                  message:
                    description: |-
                      Детали возникшей ошибки при создании снапшота, если указаны.
                      **Примечание:** сообщение может быть залогировано и не должно содержать конфиденциальную информацию.
                  time:
                    description: |-
                      Временная метка, когда была обнаружена ошибка.
              readyToUse:
                description: |-
                  Указывает, готов ли снапшот для восстановления тома.
                  При динамическом создании снапшота заполняется контроллером снапшотов
                  значением `ready_to_use`, возвращаемым из вызова gRPC `CreateSnapshot` CSI.
                  Для существующего снапшота заполняется значением `ready_to_use`,
                  возвращаемым из вызова gRPC `ListSnapshots` CSI, если драйвер поддерживает это,
                  иначе устанавливается в `True`.
                  Если не указано, готовность снапшота неизвестна.
              restoreSize:
                description: |-
                  Минимальный размер тома, необходимый для создания тома из этого снапшота.
                  При динамическом создании снапшота заполняется контроллером снапшотов
                  значением `size_bytes`, возвращаемым из вызова gRPC `CreateSnapshot` CSI.
                  Для существующего снапшота заполняется значением `size_bytes`,
                  возвращаемым из вызова gRPC `ListSnapshots` CSI, если драйвер поддерживает это.
                  При восстановлении тома из этого снапшота размер тома **не должен**
                  быть меньше `restoreSize`, если он указан, иначе восстановление завершится ошибкой.
                  Если не указано, размер неизвестен.
              volumeGroupSnapshotName:
                description: |-
                  Имя VolumeGroupSnapshot, частью которого является этот VolumeSnapshot.
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: |-
          VolumeSnapshot — это запрос пользователя на создание точечного снапшота постоянного тома
          или на привязку к существующему снапшоту.
        properties:
          apiVersion:
            description: |-
              Версия API представления объекта. Серверы преобразуют распознанные схемы
              в последнее внутреннее значение и могут отклонять нераспознанные значения.
              Подробнее: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
          kind:
            description: |-
              Тип REST-ресурса, который представляет объект. Серверы могут определять это значение
              из конечной точки, на которую клиент отправляет запросы. Нельзя обновить
              после создания. Значение должно быть в формате CamelCase.
              Подробнее: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
          spec:
            description: |-
              Свойства снапшота, запрошенного пользователем.
              Подробнее: https://kubernetes.io/docs/concepts/storage/volume-snapshots#volumesnapshots
            properties:
              source:
                description: |-
                  Указывает источник создания снапшота.
                  Неизменяемо после создания.
                properties:
                  persistentVolumeClaimName:
                    description: |-
                      Имя объекта PersistentVolumeClaim, представляющего том,
                      из которого должен быть создан снапшот.
                      PVC должен находиться в том же неймспейсе, что и объект VolumeSnapshot.
                      Указывается, если снапшот не существует и его необходимо создать.
                      Неизменяемо.
                  volumeSnapshotContentName:
                    description: |-
                      Имя существующего объекта VolumeSnapshotContent, представляющего существующий снапшот тома.
                      Указывается, если снапшот уже существует и требуется только
                      его представление в Kubernetes.
                      Неизменяемо.
              volumeSnapshotClassName:
                description: |-
                  Имя VolumeSnapshotClass, запрошенного VolumeSnapshot.
                  Может быть пустым для использования класса снапшотов по умолчанию.
                  В кластере может быть несколько классов снапшотов по умолчанию: один
                  для каждого CSI-драйвера. Если класс снапшотов не указан,
                  проверяется VolumeSnapshotSource для определения связанного CSI-драйвера,
                  и используется класс снапшотов по умолчанию для этого CSI-драйвера.
                  Если для одного CSI-драйвера существует несколько VolumeSnapshotClass,
                  помеченных как используемые по умолчанию, CreateSnapshot завершается ошибкой и создает событие.
                  Не допускается пустая строка.
          status:
            description: |-
              Текущая информация о снапшоте.
              Перед использованием необходимо проверить успешность привязки между объектами VolumeSnapshot и
              VolumeSnapshotContent, убедившись, что оба объекта указывают друг на друга.
            properties:
              boundVolumeSnapshotContentName:
                description: |-
                  Имя объекта VolumeSnapshotContent, к которому привязан этот объект VolumeSnapshot.
                  Если не указано, объект VolumeSnapshot еще не привязан к объекту VolumeSnapshotContent.
                  **Примечание:** для предотвращения проблем с безопасностью перед использованием необходимо проверить
                  успешность привязки между объектами VolumeSnapshot и VolumeSnapshotContent, убедившись,
                  что оба объекта указывают друг на друга.
              creationTime:
                description: |-
                  Временная метка создания точечного снапшота нижележащей системой хранения.
                  При динамическом создании снапшота заполняется контроллером снапшотов
                  значением `creation_time`, возвращаемым из вызова gRPC `CreateSnapshot` CSI.
                  Для существующего снапшота заполняется значением `creation_time`,
                  возвращаемым из вызова gRPC `ListSnapshots` CSI, если драйвер поддерживает это.
                  Если не указано, время создания снапшота неизвестно.
              error:
                description: |-
                  Последняя наблюдаемая ошибка при создании снапшота, если есть.
                  Полезно контроллерам верхнего уровня (например, контроллеру приложения)
                  для решения о продолжении ожидания создания снапшота по типу ошибки.
                  Контроллер снапшотов продолжает повторные попытки при возникновении ошибки во время
                  создания снапшота. После успешного создания поле очищается.
                properties:
                  message:
                    description: |-
                      Детали возникшей ошибки при создании снапшота, если указаны.
                      **Примечание:** сообщение может быть залогировано и не должно содержать конфиденциальную информацию.
                  time:
                    description: |-
                      Временная метка, когда была обнаружена ошибка.
              readyToUse:
                description: |-
                  Указывает, готов ли снапшот для восстановления тома.
                  При динамическом создании снапшота заполняется контроллером снапшотов
                  значением `ready_to_use`, возвращаемым из вызова gRPC `CreateSnapshot` CSI.
                  Для существующего снапшота заполняется значением `ready_to_use`,
                  возвращаемым из вызова gRPC `ListSnapshots` CSI, если драйвер поддерживает это,
                  иначе устанавливается в `True`.
                  Если не указано, готовность снапшота неизвестна.
              restoreSize:
                description: |-
                  Минимальный размер тома, необходимый для создания тома из этого снапшота.
                  При динамическом создании снапшота заполняется контроллером снапшотов
                  значением `size_bytes`, возвращаемым из вызова gRPC `CreateSnapshot` CSI.
                  Для существующего снапшота заполняется значением `size_bytes`,
                  возвращаемым из вызова gRPC `ListSnapshots` CSI, если драйвер поддерживает это.
                  При восстановлении тома из этого снапшота размер тома **не должен**
                  быть меньше `restoreSize`, если он указан, иначе восстановление завершится ошибкой.
                  Если не указано, размер неизвестен.
              volumeGroupSnapshotName:
                description: |-
                  Имя VolumeGroupSnapshot, частью которого является этот VolumeSnapshot.
